<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NIDM viewer</title>
  <link rel="stylesheet" href="/dist/css/bootstrap.min.css" type="text/css"/>
  <link rel="stylesheet" href="/slick.grid.css" type="text/css"/>
  <link rel="stylesheet" href="/jquery-ui-1.8.16.custom.css" type="text/css"/>
  <!--link rel="stylesheet" href="/examples.css" type="text/css"/-->
  <link rel="stylesheet" href="/example-bootstrap.css" type="text/css"/>
  <link rel="stylesheet" href="brainverse.css" type="text/css"/>
  <style rel="stylesheet" type="text/css">
    .grid-col {
      padding: 35px;
    }
    .info-col {
      padding: 20px;
    }
  </style>
    <script type="text/javascript" src="/rdf_store_min.js"></script>
    <script src="/jquery-1.7.min.js"></script>
    <script src="/jquery.event.drag-2.2.js"></script>

    <script src="/slick.core.js"></script>
    <script src="/slick.grid.js"></script>
    <script src="/bootstrap-slickgrid.js"></script>
    <script type="text/javascript">
        var params = [];
        params["worldSpace"] = true;
        params["expandable"] = true;
        //params["luts"] = [{"name":"PuBu", "data":[[0,1,0.968627,0.984314],[0.125,0.92549,0.905882,0.94902],[0.25,0.815686,0.819608,0.901961],[0.375,0.65098,0.741176,0.858824],[0.5,0.454902,0.662745,0.811765],[0.625,0.211765,0.564706,0.752941],[0.75,0.0196078,0.439216,0.690196],[0.875,0.0156863,0.352941,0.552941],[1,0.00784314,0.219608,0.345098]]},
        //                  {"name":"OrRd", "data":[[0,1,0.968627,0.92549],[0.125,0.996078,0.909804,0.784314],[0.25,0.992157,0.831373,0.619608],[0.375,0.992157,0.733333,0.517647],[0.5,0.988235,0.552941,0.34902],[0.625,0.937255,0.396078,0.282353],[0.75,0.843137,0.188235,0.121569],[0.875,0.701961,0,0],[1,0.498039,0,0]]}];
    </script>
</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">ReproNIm</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <p class="navbar-btn">
                <a href="#" class="btn btn-success">Sign In</a>
            </p>
          </li>
          <li><a href="#">Settings</a></li>
          <li><a href="#">Profile</a></li>
          <li><a href="#">Help</a></li>
        </ul>
        <form class="navbar-form navbar-right">
          <input type="text" class="form-control" placeholder="Search...">
        </form>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-3" >
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">BrainVerse</li>
            <li class="active"><a href="#">Overview </a></li>
            <li><a href="#">Projects</a></li>
            <li><a href="#">Workflows</a></li>
            <li><a href="#">Executions</a></li>
          </ul>
        </div>
      </div>
      <div class="col-xs-9">
        <form class="form" id="rdft" >
          <div class="form-group-row">
            <label class="col-xs-3 col-form-label" for="nidm">NIDM File URL</label>
            <div class="col-xs-6">
              <input class="form-control" type="url" name="url" placeholder="Enter URL" value="some URL">
            </div>
          </div>
          <button type="button" class="btn btn-default" onclick="processURL(this.form.url.value)">Submit</button>
        </form>
        <p>               OR   </p>
        <br>
        <form action="http://localhost:3000/query-by-file" method="post" enctype="multipart/form-data" id="testform">
          <div class="form-group row">
          <label for="file-u" class="col-xs-2 col-form-label">Upload NIDM File </label>
          <div class="col-xs-7">
          <label>
            <input type="file" name="sampleFile" id="sampleFile" value="Choose a file"/>
            <span id="fileSelected"></span>
          </label>
         </div>
       </div>
       <input type="submit" value="Submit">
       </form>
        <div>
          <table width="100%">
          <tr>
            <td valign="top" class="grid-col">
            <div id="myGrid" class="grid"></div>
            </td>
          </tr>
        </div>

      </div>
    </div>
  </div>


<script>
function processFile(){
}
function processURL(URL){
    console.log(URL)
    urlObJ={}
    urlObJ["url"] = URL
    $.ajax({
      type: "POST",
      url:  "http://localhost:3000/query-by-url",
      contentType: "application/json",
      data: JSON.stringify(urlObJ),
      success: function(data){
        console.log(data)

        $("#myGrid").slickgrid({
          columns: data.columns,
          data: data.data,
          slickGridOptions: {
            enableCellNavigation: true,
            enableColumnReorder: false,
            forceFitColumns: true,
            rowHeight: 35
          }
        })
      }
    })
}
</script>
</body>
</html>
